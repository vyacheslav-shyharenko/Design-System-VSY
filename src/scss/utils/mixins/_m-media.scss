@use "sass:map";
@use "../tokens/t-token" as t;
@use "../functions/f-get-token" as gt;

/// Media query mixin with optional retina support
/// @param $breakpoint-name - –∫–ª—é—á —ñ–∑ $breakpoints map
/// @param $type - min –∞–±–æ max (—Ç–∏–ø @media)
/// @param $retina - true, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ Retina
@mixin media($breakpoint-name, $type: min, $retina: false) {
  // –û—Ç—Ä–∏–º—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –±—Ä–µ–π–∫–ø–æ—ñ–Ω—Ç–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—é
  $value: gt.get-token(breakpoint, $breakpoint-name);

  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
  @if $value == null {
    @error "üö´ Breakpoint '#{$breakpoint-name}' not found via get-token().";
  }

  @if $type == max {
    $value: $value - 0.02px;
  }

  $media: "(#{$type}-width: #{$value})";

  @if $retina {
    @media only screen and #{$media} and (-webkit-min-device-pixel-ratio: 2),
           only screen and #{$media} and (min-resolution: 192dpi),
           only screen and #{$media} and (min-resolution: 2dppx) {
      @content;
    }
  } @else {
    @media only screen and #{$media} {
      @content;
    }
  }
}
